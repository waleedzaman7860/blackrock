!function(r){var t={};function i(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return r[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=r,i.c=t,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)i.d(r,t,function(e){return n[e]}.bind(null,t));return r},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/",i(i.s="./src/index.ts")}({"./src/Connector.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Connector", function() { return Connector; });\n/* harmony import */ var _IFrame__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./IFrame */ "./src/IFrame.ts");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass Connector {\n  constructor() {\n    _defineProperty(this, "iframe", null);\n  }\n\n  initialize(iframeParam) {\n    this.iframe = new _IFrame__WEBPACK_IMPORTED_MODULE_0__["IFrame"](iframeParam);\n    Connector.iframesIds.push(iframeParam.id);\n    return this.iframe.create();\n  }\n\n  static getNumberOfIframes() {\n    return Connector.iframesIds.length;\n  }\n\n}\n\n_defineProperty(Connector, "iframesIds", []);\n\n//# sourceURL=webpack:///./src/Connector.ts?')},"./src/Dapi.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dapi", function() { return Dapi; });\n/* harmony import */ var _Connector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Connector */ "./src/Connector.ts");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint operator-assignment: ["error", "never"] */\n\n/* eslint class-methods-use-this: ["error", { "exceptMethods": ["create"] }] */\n\nclass Dapi {\n  constructor() {\n    _defineProperty(this, "environments", {\n      sandbox: "sandbox",\n      production: "production"\n    });\n\n    _defineProperty(this, "version", "1.0.0");\n  }\n\n  create(param) {\n    const {\n      appKey,\n      environment,\n      onSuccess,\n      onFailure,\n      countries,\n      isExperimental\n    } = param;\n\n    if (!environment) {\n      throw new TypeError("Environment not specified");\n    } else if (environment !== this.environments.sandbox && environment !== this.environments.production) {\n      throw new TypeError("Unknown Environment specified");\n    } else if (!appKey) {\n      throw new TypeError("App key not specified");\n    } else if (countries.length === 0) {\n      throw new TypeError("Countries not specified");\n    } else if (!onSuccess) {\n      throw new TypeError("onSuccess Function not specified");\n    } else if (!onFailure) {\n      throw new TypeError("onFailure Function not specified");\n    } else {\n      let dapiId = "dapi-connect-";\n      const connector = new _Connector__WEBPACK_IMPORTED_MODULE_0__["Connector"]();\n      const id = _Connector__WEBPACK_IMPORTED_MODULE_0__["Connector"].getNumberOfIframes() + 1;\n      dapiId = dapiId + id;\n\n      const iframeParam = _objectSpread({}, param, {\n        originURL: "https://connect.dapi.co",\n        id: dapiId\n      });\n\n      return connector.initialize(iframeParam);\n    }\n  }\n\n}\n\n//# sourceURL=webpack:///./src/Dapi.ts?')},"./src/IFrame.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IFrame", function() { return IFrame; });\n/* eslint class-methods-use-this: ["error", { "exceptMethods": ["eventTriggered"] }] */\nclass IFrame {\n  constructor(iframeParams) {\n    this.iframeParams = iframeParams;\n  }\n\n  create() {\n    const iframe = window.document.createElement("iframe");\n    iframe.setAttribute("id", this.iframeParams.id);\n    iframe.src = this.getURL();\n    iframe.style.position = "fixed";\n    iframe.style.top = "0px";\n    iframe.style.left = "0px";\n    iframe.style.right = "0px";\n    iframe.style.bottom = "0px";\n    iframe.style.zIndex = "2147483647";\n    iframe.style.border = "0px";\n    iframe.style.display = "none";\n    iframe.style.overflow = "hidden auto";\n    iframe.width = "100%";\n    iframe.height = "100%";\n    window.document.body.append(iframe);\n    this.bindEvent("message");\n    return {\n      open: this.open.bind(this),\n      close: this.close.bind(this)\n    };\n  }\n\n  hide() {\n    window.document.getElementById(this.iframeParams.id).style.display = "none";\n  }\n\n  unhide() {\n    window.document.getElementById(this.iframeParams.id).style.display = "block";\n  }\n\n  bindEvent(eventName) {\n    window.addEventListener(eventName, this.eventTriggered.bind(this), false);\n  }\n\n  eventTriggered(e) {\n    const childWindow = window.document.getElementById(this.iframeParams.id).contentWindow;\n\n    if (e.source !== childWindow) {\n      return; // Skip message in this event listener\n    }\n\n    switch (e.data.event) {\n      case "EXIT_IFRAME":\n        {\n          this.hide();\n          break;\n        }\n\n      case "IFRAME_LOADED":\n        {\n          break;\n        }\n\n      case "CONNECTED":\n        {\n          this.iframeParams.onSuccess(e.data.data);\n          this.hide();\n          break;\n        }\n\n      case "ERROR":\n        {\n          this.iframeParams.onFailure(e.data.data);\n          break;\n        }\n\n      default:\n        {\n          break;\n        }\n    }\n  }\n\n  sendMessage() {\n    window.document.getElementById(this.iframeParams.id).contentWindow.postMessage({\n      event: "OPEN_IFRAME"\n    }, this.iframeParams.originURL);\n  }\n\n  getURL() {\n    return `${this.iframeParams.originURL}?environment=${this.iframeParams.environment}&appKey=${this.iframeParams.appKey}&origin=${window.location.href}&countries=${JSON.stringify(this.iframeParams.countries ? this.iframeParams.countries : [])}&isExperimental=${this.iframeParams.isExperimental}`;\n  }\n\n  open() {\n    this.sendMessage();\n    this.unhide();\n  }\n\n  close() {\n    this.hide();\n  }\n\n}\n\n//# sourceURL=webpack:///./src/IFrame.ts?')},"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Dapi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Dapi */ "./src/Dapi.ts");\n/* eslint-disable unicorn/filename-case */\n\n/* eslint no-param-reassign: ["error", { "props": false }] */\n\n/* eslint-env browser */\n\n\n(function (window) {\n  if (!window) {\n    throw new TypeError("Window object not found!");\n  } else {\n    const dapi = new _Dapi__WEBPACK_IMPORTED_MODULE_0__["Dapi"]();\n    window.dapi = dapi;\n    window.Dapi = dapi;\n  }\n})(window || null);\n\n//# sourceURL=webpack:///./src/index.ts?')}});